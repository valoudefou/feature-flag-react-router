"use strict";(self.webpackChunkmy_auth_app=self.webpackChunkmy_auth_app||[]).push([[631,662],{631:(e,i,n)=>{n.r(i),n.d(i,{launchQaAssistant:()=>c});var a=n(104),t=n(662);n(284);const s=e=>document.querySelector(`script[src*="${e}"]`);function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"TypeScript"===a.S.name&&window.location.reload();const i=new CustomEvent(t.I.FsTriggerRendering,{detail:{forcedReFetchFlags:e}});window.dispatchEvent(i)}function r(e){let{event:i,config:n,func:s,visitorVariationState:r}=e;if(n.isQAModeEnabled&&(0,a.i)())switch(i.data.name){case t.M.FsQaAssistantReady:!function(e){e.visitorVariations&&(0,t.s)(e),e.exposedVariations&&(0,t.a)(e)}(r);break;case t.M.MinimizeQaAssistantClose:case t.M.QaAssistantClose:!function(e){let{config:i,func:n,visitorVariationState:t}=e;i.isQAModeEnabled=!1,sessionStorage.removeItem(a.c),n&&window.removeEventListener("message",n),document.getElementById(a.F)?.remove(),t.forcedVariations={},o()}({config:n,func:s,visitorVariationState:r});break;case t.M.FsApplyForcedVariations:!function(e){let{value:i,visitorVariationState:n}=e;const t=sessionStorage.getItem(a.b);let s={};try{s=JSON.parse(t||"{}")}catch(r){console.error("Error parsing sessionForcedVariations",r)}s={...s,...i},sessionStorage.setItem(a.b,JSON.stringify(s)),n.forcedVariations=s,o()}({value:i.data.value,visitorVariationState:r});break;case t.M.FsResetForcedVariations:!function(e){sessionStorage.removeItem(a.b),e.forcedVariations={},o()}(r);break;case t.M.FsTriggerRender:o(!0)}}function d(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;window?.frames?.ABTastyQaAssistant||((0,a.l)(e,"QA assistant","Loading QA Assistant"),function(e){if(s(a.T)||s(a.a))return;const i=document.createElement("script");i.src=e,i.id=a.F,e===a.Q&&(i.crossOrigin="anonymous"),document.body.append(i)}(i||a.e));let t={};const o=sessionStorage.getItem(a.b);try{t=JSON.parse(o||"{}")}catch(l){console.error("Error parsing sessionForcedVariations",l)}n.forcedVariations=t,window.__flagshipSdkQaAssistantMessageHandler&&window.removeEventListener("message",window.__flagshipSdkQaAssistantMessageHandler);const d=i=>{a.d.includes(i?.origin)&&r({visitorVariationState:n,event:i,config:e,func:d})};window.__flagshipSdkQaAssistantMessageHandler=d,window.addEventListener("message",window.__flagshipSdkQaAssistantMessageHandler),e.isQAModeEnabled=!0,sessionStorage.setItem(a.c,"true")}function l(e,i){(0,a.l)(e,"QA assistant","Listening for keyboard events to launch QA Assistant"),window.__flagshipSdkOnKeyCombinationDown&&document.removeEventListener("keydown",window.__flagshipSdkOnKeyCombinationDown),window.__flagshipSdkOnKeyCombinationUp&&document.removeEventListener("keyup",window.__flagshipSdkOnKeyCombinationUp);const n={};window.__flagshipSdkOnKeyCombinationDown=t=>{n[t.key]=!0,sessionStorage.removeItem(a.b),(n.Control||n.Alt)&&n.q&&n.a&&d(e,null,i)},window.__flagshipSdkOnKeyCombinationUp=e=>{delete n[e.key]},document.addEventListener("keydown",window.__flagshipSdkOnKeyCombinationDown),document.addEventListener("keyup",window.__flagshipSdkOnKeyCombinationUp)}function c(e,i){(0,a.i)()&&(0,a.o)(()=>{const n={[a.n]:a.e,[a.m]:a.e,[a.k]:a.f,[a.j]:a.f,[a.h]:a.Q,[a.g]:a.Q},s=new URLSearchParams(window.location.search),o=Object.keys(n).find(e=>"true"===s.get(e))||"";window.__flagshipSdkOnPlatformChoiceLoaded&&window.removeEventListener("message",window.__flagshipSdkOnPlatformChoiceLoaded),window.__flagshipSdkOnPlatformChoiceLoaded=function n(s){a.d.includes(s.origin)&&s.data.name===t.M.QaAssistantPlatformChoiceLoaded&&(e.isQAModeEnabled||d(e,null,i),window.removeEventListener("message",n))},window.addEventListener("message",window.__flagshipSdkOnPlatformChoiceLoaded),function(e,i){function n(){e.isQAModeEnabled&&(i.navigationDetected=!0)}window.__flagshipSdkOriginalPushState&&(window.history.pushState=window.__flagshipSdkOriginalPushState),window.__flagshipSdkOriginalReplaceState&&(window.history.replaceState=window.__flagshipSdkOriginalReplaceState),window.__flagshipSdkPopStateHandler&&window.removeEventListener("popstate",window.__flagshipSdkPopStateHandler),window.__flagshipSdkOriginalPushState=window.history.pushState,window.__flagshipSdkOriginalReplaceState=window.history.replaceState,window.history.pushState=function(){if(window.__flagshipSdkOriginalPushState){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];window.__flagshipSdkOriginalPushState.apply(this,i),n()}},window.history.replaceState=function(){if(window.__flagshipSdkOriginalReplaceState){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];window.__flagshipSdkOriginalReplaceState.apply(this,i),n()}},window.__flagshipSdkPopStateHandler=()=>{n()},window.addEventListener("popstate",window.__flagshipSdkPopStateHandler)}(e,i),e.isQAModeEnabled||o?d(e,n[o],i):l(e,i)})}},662:(e,i,n)=>{var a,t,s,o;function r(e){window?.frames?.ABTastyQaAssistant&&window.frames.ABTastyQaAssistant.postMessage(e,"*")}function d(e){e?.visitorVariations&&r({name:t.FsUpdateVisitorAllocatedVariation,value:e.visitorVariations})}function l(e){if(!e?.exposedVariations)return;const i=e.navigationDetected;e.navigationDetected&&(e.navigationDetected=!1),r({name:t.FsVisitorExposedVariation,value:e.exposedVariations,param:i?s.NewNavigation:void 0})}n.r(i),n.d(i,{I:()=>o,M:()=>a,a:()=>l,i:()=>c,s:()=>d}),function(e){e.QaAssistantClose="ABTASTY_QA_ASSISTANT_CLOSE",e.FsApplyForcedVariations="FS_APPLY_FORCED_VARIATIONS",e.FsResetForcedVariations="FS_RESET_FORCED_VARIATIONS",e.FsQaAssistantReady="FS_QA_ASSISTANT_READY",e.MinimizeQaAssistantClose="ABTASTY_QA_MINIMIZE_QA_ASSISTANT_CLOSE",e.FsTriggerRender="FS_TRIGGER_RENDER",e.QaAssistantPlatformChoiceLoaded="ABTASTY_QA_ASSISTANT_PLATFORM_CHOICE_LOADED"}(a||(a={})),function(e){e.FsUpdateVisitorAllocatedVariation="FS_UPDATE_VISITOR_ALLOCATED_VARIATION",e.FsVisitorExposedVariation="FS_VISITOR_EXPOSED_VARIATION",e.FsHIT="FS_HIT"}(t||(t={})),function(e){e.NewNavigation="newNavigation"}(s||(s={})),function(e){e.FsTriggerRendering="FS_TRIGGER_RENDERING"}(o||(o={}));var c=Object.freeze({__proto__:null,sendFsHitToQA:function(e){r({name:t.FsHIT,value:e.map(e=>({...e,timestamp:Date.now()-e.qt}))})},sendMessageToIframe:r,sendVisitorAllocatedVariations:d,sendVisitorExposedVariations:l})}}]);
//# sourceMappingURL=631.23174159.chunk.js.map